<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>ÂÆ∂Èò≤‰∏≠ÂøÉÂ∞æÁâôÁõõÂÖ∏ 8-Bit ÊäΩÁçéÁ≥ªÁµ±</title>

  <!-- Pixel font + ÂæÆËªüÊ≠£ÈªëÈ´î -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
    rel="stylesheet"
  />

  <style>
    :root {
      --bg-main: #140000;
      --accent: #ff5555;
      --accent2: #ffd700;
      --pixel-border: 4px;
      --font-pixel: "Press Start 2P", system-ui, -apple-system, BlinkMacSystemFont,
        "Segoe UI", sans-serif;
      --font-zh: "Microsoft JhengHei", system-ui, -apple-system, BlinkMacSystemFont,
        "Segoe UI", sans-serif;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html,
    body {
      width: 100%;
      height: 100%;
      background: var(--bg-main);
      color: #fff;
      font-family: var(--font-zh);
      overflow: hidden;
    }

    body {
      position: relative;
    }

    /* üî¥ Á´ãÈ´îÁ¥ÖËâ≤ÊªæÂãïÂú∞ÊùøËÉåÊôØÔºàÊäïÂΩ±Á´ØÈ¢®Ê†ºÔºâ */
    .bg-grid {
      position: fixed;
      inset: 0;
      overflow: hidden;
      z-index: -2;
      background: radial-gradient(circle at top, #660000 0, #140000 40%, #000 100%);
    }

    .bg-grid::before {
      content: "";
      position: absolute;
      inset: 50% -40% -10% -40%;
      background-image:
        linear-gradient(rgba(255, 60, 60, 0.55) 2px, transparent 2px),
        linear-gradient(90deg, rgba(255, 60, 60, 0.55) 2px, transparent 2px);
      background-size: 120px 40px, 80px 80px;
      transform-origin: center top;
      animation: floor-scroll 9s linear infinite;
      opacity: 0.95;
      filter: drop-shadow(0 0 10px #ff4444);
    }

    @keyframes floor-scroll {
      0% {
        transform: perspective(900px) rotateX(72deg) translateY(0);
      }
      100% {
        transform: perspective(900px) rotateX(72deg) translateY(80px);
      }
    }

    .pixel-frame {
      border: var(--pixel-border) solid #ffcccc;
      box-shadow: 0 0 0 4px #440000, 0 0 0 8px #ff5555;
      background: rgba(0, 0, 0, 0.72);
      padding: 16px;
      border-radius: 4px;
    }

    .pixel-btn {
      display: inline-block;
      padding: 8px 16px;
      margin: 4px;
      border: var(--pixel-border) solid #fff;
      background: #990000;
      box-shadow: 0 0 0 4px #440000;
      color: #fff;
      font-family: var(--font-pixel);
      font-size: 10px;
      text-transform: uppercase;
      cursor: pointer;
      text-align: center;
    }
    .pixel-btn:active {
      transform: translateY(2px);
      box-shadow: 0 0 0 2px #440000;
    }

    .pixel-input,
    .pixel-select {
      padding: 6px 8px;
      border: var(--pixel-border) solid #fff;
      background: #220000;
      color: #fff;
      font-family: var(--font-zh);
      font-size: 14px;
      margin: 4px 0;
      width: 100%;
    }

    .layout {
      position: relative;
      z-index: 1;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      padding: 16px;
      gap: 8px;
    }

    .header {
      font-family: var(--font-pixel);
      font-size: 14px;
      text-shadow: 0 0 4px #ff8888;
      margin-bottom: 4px;
    }

    .sub-header {
      font-size: 14px;
      opacity: 0.85;
      margin-bottom: 8px;
    }

    .row {
      display: flex;
      gap: 16px;
      height: calc(100% - 60px);
    }

    .col-left,
    .col-right {
      display: flex;
      flex-direction: column;
    }

    .col-left {
      flex: 2.1;
      min-width: 0;
    }

    .col-right {
      flex: 1;
      min-width: 0;
      gap: 8px;
    }

    #animationArea {
      flex: 1;
      min-height: 0;
      position: relative;
      overflow: hidden;
      border-radius: 4px;
      background: radial-gradient(circle at top, #3a0000 0, #050000 65%);
    }

    .status-panel {
      font-size: 13px;
      line-height: 1.4;
      max-height: 50%;
      overflow: auto;
    }

    .status-panel h3 {
      font-family: var(--font-pixel);
      font-size: 10px;
      margin-bottom: 4px;
    }

    .status-panel ul {
      list-style: none;
      padding-left: 0;
      margin-top: 4px;
    }

    .status-panel li {
      font-size: 12px;
      margin-bottom: 2px;
    }

    .tag {
      display: inline-block;
      padding: 2px 6px;
      margin-right: 4px;
      border-radius: 2px;
      font-size: 11px;
      background: #660000;
      color: #ffd700;
      font-family: var(--font-pixel);
    }

    .small {
      font-size: 11px;
      opacity: 0.8;
    }

    /* Áé©ÂÆ∂Áï´Èù¢ */
    .player-layout {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      gap: 16px;
      text-align: center;
    }

    .player-no {
      font-family: var(--font-pixel);
      font-size: 20px;
      color: var(--accent2);
      text-shadow: 0 0 8px #ffcc00;
      margin-top: 8px;
    }

    .player-name {
      font-size: 18px;
      margin-top: 4px;
    }

    .player-status {
      font-size: 14px;
      margin-top: 8px;
    }

    .win-banner {
      font-family: var(--font-pixel);
      font-size: 22px;
      color: #00ffea;
      text-shadow: 0 0 10px #00ffff;
      animation: win-blink 0.5s steps(2, jump-none) infinite;
      margin-top: 12px;
    }

    @keyframes win-blink {
      0% { opacity: 1; }
      50% { opacity: 0.2; }
      100% { opacity: 1; }
    }

    /* Áé©ÂÆ∂Á´ØÂÖ®Ëû¢Âπï‰∏≠ÁçéË¶ñÁ™ó */
    .player-win-overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at center, rgba(0,0,0,0.9), rgba(0,0,0,0.98));
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .player-win-card {
      border: 4px solid #ffd700;
      box-shadow: 0 0 0 4px #ff8800, 0 0 16px #ffd700;
      padding: 20px;
      background: #330000;
      text-align: center;
      min-width: 260px;
    }

    .player-win-card .title {
      font-family: var(--font-pixel);
      font-size: 14px;
      margin-bottom: 10px;
      color: #ffd700;
    }
    .player-win-card .no {
      font-family: var(--font-pixel);
      font-size: 22px;
      margin-bottom: 6px;
    }
    .player-win-card .name {
      font-size: 18px;
    }
    .player-win-card .sub {
      margin-top: 8px;
      font-size: 12px;
    }

    /* ÂãïÁï´ÂçÄÂÖ±ÊúâÂÖÉÁ¥† */
    .anim-root {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 8px;
      font-size: 14px;
      overflow: hidden;
    }

    .anim-title {
      position: absolute;
      top: 4px;
      left: 8px;
      font-family: var(--font-pixel);
      font-size: 10px;
      opacity: 0.75;
    }

    .anim-phase-label {
      position: absolute;
      top: 4px;
      right: 8px;
      font-family: var(--font-pixel);
      font-size: 10px;
      color: #ffd700;
    }

    .winner-display {
      position: absolute;
      bottom: 6px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      font-size: 14px;
    }

    .winner-display .no {
      font-family: var(--font-pixel);
      font-size: 16px;
      color: #ffd700;
      text-shadow: 0 0 6px #ffd700;
    }

    .winner-display .name {
      font-size: 14px;
      margin-top: 2px;
    }

    /* ÊäïÂΩ±Á´ØÔºöÂÖ®Ëû¢Âπï‰∏≠ÁçéËÄÖÂΩàÂá∫Âç° */
    .win-overlay {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.4s ease-out;
    }

    .win-overlay-card {
      border: 6px solid #ffd700;
      box-shadow: 0 0 0 4px #ff8800, 0 0 24px #ffd700;
      padding: 24px 32px;
      background: #220000;
      text-align: center;
      min-width: 320px;
    }

    .win-overlay-card .title {
      font-family: var(--font-pixel);
      font-size: 14px;
      margin-bottom: 10px;
      color: #ffd700;
    }

    .win-overlay-card .no {
      font-family: var(--font-pixel);
      font-size: 26px;
      margin-bottom: 6px;
    }

    .win-overlay-card .name {
      font-size: 20px;
      margin-bottom: 4px;
    }

    .win-overlay-card .sub {
      font-size: 12px;
      opacity: 0.8;
    }

    /* 1. ÂÉèÁ¥†Ë≥ΩËªä / È¶¨Â†¥È¢®Ê†º */
    .race-scene {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
    }
    .race-stands {
      height: 26%;
      background:
        repeating-linear-gradient(
          0deg,
          #550000,
          #550000 4px,
          #aa0000 4px,
          #aa0000 8px
        );
      border-bottom: 3px solid #000;
      position: relative;
    }
    .race-stands::after {
      content: "PIXEL CIRCUIT";
      position: absolute;
      bottom: 4px;
      left: 50%;
      transform: translateX(-50%);
      font-family: var(--font-pixel);
      font-size: 9px;
      color: #ffd7d7;
    }

    .race-field {
      flex: 1;
      background: linear-gradient(#007f0f, #005f0b);
      position: relative;
      padding: 6px 14px;
      display: flex;
      flex-direction: column;
      justify-content: space-around;
    }

    .race-lane {
      position: relative;
      height: 13%;
      border-top: 1px dashed rgba(255, 255, 255, 0.4);
      border-bottom: 1px dashed rgba(255, 255, 255, 0.4);
    }

    .race-car {
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      font-size: 20px;
      filter: drop-shadow(0 0 4px #ffaaaa);
    }

    .race-car.running {
      animation: race-run 8s linear forwards;
    }

    .race-car.winner {
      filter: drop-shadow(0 0 8px #ffd700);
    }

    .race-finish {
      position: absolute;
      right: 10%;
      top: 4px;
      bottom: 4px;
      width: 8px;
      background-image: linear-gradient(
        to bottom,
        #ffffff 50%,
        #000000 50%
      );
      background-size: 8px 14px;
    }

    @keyframes race-run {
      0% { transform: translate(0, -50%); }
      100% { transform: translate(70vw, -50%); }
    }

    .race-caption {
      position: absolute;
      bottom: 2px;
      left: 50%;
      transform: translateX(-50%);
      font-family: var(--font-pixel);
      font-size: 9px;
      background: rgba(0,0,0,0.7);
      padding: 2px 6px;
    }

    /* 2. ÈªÉÈáëÊãâÈú∏ Slots */
    .slots-container {
      display: flex;
      gap: 12px;
      padding: 16px;
      background: linear-gradient(#771111, #330000);
      border-radius: 4px;
      border: 3px solid #ffaaaa;
      box-shadow: 0 0 0 4px #440000;
    }

    .slot-window {
      width: 92px;
      height: 92px;
      overflow: hidden;
      border: 3px solid #ffffff;
      background: #000000;
      position: relative;
    }

    .slot-strip {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      will-change: transform;
    }

    .slot-item {
      height: 46px;
      width: 92px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
    }

    .slot-window.reveal {
      border-color: #ffd700;
      box-shadow: 0 0 10px #ffd700;
    }

    /* 3. Â§æÂ®ÉÂ®ÉÊ©ü */
    .claw-scene {
      width: 100%;
      height: 100%;
      position: relative;
      background: radial-gradient(circle at top, #222244, #000011);
    }

    .claw-rail {
      position: absolute;
      top: 12%;
      left: 12%;
      right: 12%;
      height: 5px;
      background: linear-gradient(#dddddd, #999999);
      box-shadow: 0 2px 3px rgba(0,0,0,0.8);
    }

    .claw-head {
      position: absolute;
      top: 12%;
      font-size: 30px;
      transform: translateX(0);
    }

    .claw-pit {
      position: absolute;
      bottom: 8%;
      left: 10%;
      right: 10%;
      height: 80px;
      border-radius: 20px;
      border: 3px solid #444;
      background: repeating-linear-gradient(
        45deg,
        #330000,
        #330000 8px,
        #550000 8px,
        #550000 16px
      );
      overflow: hidden;
    }

    .claw-toy {
      position: absolute;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 26px;
    }

    .claw-head.move-horiz {
      animation: claw-move-h 3s ease-in-out infinite alternate;
    }

    @keyframes claw-move-h {
      0% { transform: translateX(0); }
      100% { transform: translateX(60vw); }
    }

    /* 4. ÊµÅÊòüÊíûÊìä */
    .meteor-scene {
      width: 100%;
      height: 100%;
      position: relative;
      overflow: hidden;
      background: radial-gradient(circle at top, #111144, #000009);
    }

    .meteor {
      position: absolute;
      left: 110%;
      top: -10%;
      font-size: 32px;
      transform: translate(0, 0);
      filter: drop-shadow(0 0 6px #ffddaa);
    }

    .meteor.fly {
      animation: meteor-fall 1.2s linear forwards;
    }

    @keyframes meteor-fall {
      0% { transform: translate(0, 0); }
      100% { transform: translate(-140vw, 70vh); }
    }

    .shake {
      animation: screen-shake 0.3s linear 4;
    }

    @keyframes screen-shake {
      0% { transform: translate(0, 0); }
      25% { transform: translate(-4px, 2px); }
      50% { transform: translate(3px, -3px); }
      75% { transform: translate(-2px, 3px); }
      100% { transform: translate(0, 0); }
    }

    .flash {
      position: absolute;
      inset: 0;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.9), transparent);
      animation: flash-pop 0.4s ease-out forwards;
      pointer-events: none;
    }

    @keyf
